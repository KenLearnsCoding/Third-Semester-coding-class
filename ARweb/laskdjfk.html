<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="style.css">
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
  <script src="script.js"></script>
</head>
<body>
  <div class="demo">
    <span class="background">Background<br>is visible<br>through<br>transparent<br>objects.</span>
    <model-viewer id="modelViewer" src="assets/barrel_chair.glb" poster="assets/barrel_chair.webp" shadow-intensity="1" ar ar-modes="scene-viewer webxr quick-look" camera-controls auto-rotate>
      <!-- Your existing model-viewer content here -->
      <button id="ar-failure">
        AR is not tracking!
      </button>
      <button class="Hotspot" slot="hotspot-1" data-position="0.4238710366953735m 0.6859293034196332m 0.1721292462516119m" data-normal="-0.0948694562782868m 0.955832495769737m 0.27817984523695855m" data-visibility-attribute="visible">
        <div class="HotspotAnnotation">Barrel Chair</div>
      </button>
      <button class="Hotspot" slot="hotspot-2" data-position="-0.3549309468744586m 0.61291879893558m 0.3796207010691713m" data-normal="0.46038126360228104m 0.6841406357582732m 0.5656860283127318m" data-visibility-attribute="visible">
        <div class="HotspotAnnotation">Cool Texture</div>
      </button>
      <button class="Hotspot" slot="hotspot-3" data-position="0.10721144093747526m 0.027428990849131862m 0.3994770711231708m" data-normal="-2.2735862779592368e-7m 0.9999999999999716m 7.305759690293217e-8m" data-visibility-attribute="visible">
        <div class="HotspotAnnotation">Base</div>
      </button>
      <div class="progress-bar hide" slot="progress-bar">
        <div class="update-bar"></div>
      </div>
      <button slot="ar-button" id="ar-button">
        View in your space
      </button>
      <div id="ar-prompt">
        <img src="https://modelviewer.dev/shared-assets/icons/hand.png">
      </div>
      <div class="slider">
        <div class="slides">
          <button class="slide selected" onclick="switchModel('assets/barrel_chair.glb', 'assets/barrel_chair.webp')" style="background-image: url('assets/barrel_chair.webp');"></button>
          <button class="slide" onclick="switchModel('assets/chair.glb', 'assets/chair.webp')" style="background-image: url('assets/chair.webp');"></button>
        </div>
      </div>
    </model-viewer>
  </div>

  <script>
    function switchModel(modelSrc, posterSrc) {
      const modelViewer = document.getElementById('modelViewer');
      modelViewer.src = modelSrc;
      modelViewer.poster = posterSrc;

      // Clear the 'selected' class from all slides
      document.querySelectorAll('.slide').forEach(slide => slide.classList.remove('selected'));

      // Add the 'selected' class to the clicked slide
      event.currentTarget.classList.add('selected');

      // Clear existing hotspots
      modelViewer.querySelectorAll('.Hotspot').forEach(hotspot => hotspot.remove());

      // Add hotspots for the new model
      if (modelSrc === 'assets/barrel_chair.glb') {
        // Add hotspots for the barrel chair
        // Example: Add a new hotspot for the barrel chair
        const newHotspot = document.createElement('button');
        newHotspot.className = 'Hotspot';
        newHotspot.setAttribute('slot', 'hotspot-4');
        newHotspot.setAttribute('data-position', '0.1m 0.2m 0.3m');
        newHotspot.setAttribute('data-normal', '0.4m 0.5m 0.6m');
        newHotspot.setAttribute('data-visibility-attribute', 'visible');
        newHotspot.innerHTML = '<div class="HotspotAnnotation">New Hotspot</div>';
        modelViewer.appendChild(newHotspot);
      } else if (modelSrc === 'assets/chair.glb') {
        // Add hotspots for the chair
        // Example: Add a new hotspot for the chair
        const newHotspot = document.createElement('button');
        newHotspot.className = 'Hotspot';
        newHotspot.setAttribute('slot', 'hotspot-4');
        newHotspot.setAttribute('data-position', '0.7m 0.8m 0.9m');
        newHotspot.setAttribute('data-normal', '0.1m 0.2m 0.3m');
        newHotspot.setAttribute('data-visibility-attribute', 'visible');
        newHotspot.innerHTML = '<div class="HotspotAnnotation">New Hotspot</div>';
        modelViewer.appendChild(newHotspot);
      }
    }
  </script>
</body>
</html>
